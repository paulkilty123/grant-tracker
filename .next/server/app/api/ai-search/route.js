"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ai-search/route";
exports.ids = ["app/api/ai-search/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai-search%2Froute&page=%2Fapi%2Fai-search%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-search%2Froute.ts&appDir=%2FUsers%2Fpaulkilty%2FDocuments%2Fgrant-tracker%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpaulkilty%2FDocuments%2Fgrant-tracker&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai-search%2Froute&page=%2Fapi%2Fai-search%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-search%2Froute.ts&appDir=%2FUsers%2Fpaulkilty%2FDocuments%2Fgrant-tracker%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpaulkilty%2FDocuments%2Fgrant-tracker&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_paulkilty_Documents_grant_tracker_src_app_api_ai_search_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/ai-search/route.ts */ \"(rsc)/./src/app/api/ai-search/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ai-search/route\",\n        pathname: \"/api/ai-search\",\n        filename: \"route\",\n        bundlePath: \"app/api/ai-search/route\"\n    },\n    resolvedPagePath: \"/Users/paulkilty/Documents/grant-tracker/src/app/api/ai-search/route.ts\",\n    nextConfigOutput,\n    userland: _Users_paulkilty_Documents_grant_tracker_src_app_api_ai_search_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/ai-search/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhaS1zZWFyY2glMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmFpLXNlYXJjaCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmFpLXNlYXJjaCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnBhdWxraWx0eSUyRkRvY3VtZW50cyUyRmdyYW50LXRyYWNrZXIlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGcGF1bGtpbHR5JTJGRG9jdW1lbnRzJTJGZ3JhbnQtdHJhY2tlciZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDdUI7QUFDcEc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ncmFudC10cmFja2VyLz82MDZmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9wYXVsa2lsdHkvRG9jdW1lbnRzL2dyYW50LXRyYWNrZXIvc3JjL2FwcC9hcGkvYWktc2VhcmNoL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9haS1zZWFyY2gvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9haS1zZWFyY2hcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FpLXNlYXJjaC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9wYXVsa2lsdHkvRG9jdW1lbnRzL2dyYW50LXRyYWNrZXIvc3JjL2FwcC9hcGkvYWktc2VhcmNoL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9haS1zZWFyY2gvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai-search%2Froute&page=%2Fapi%2Fai-search%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-search%2Froute.ts&appDir=%2FUsers%2Fpaulkilty%2FDocuments%2Fgrant-tracker%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpaulkilty%2FDocuments%2Fgrant-tracker&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/ai-search/route.ts":
/*!****************************************!*\
  !*** ./src/app/api/ai-search/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\nfunction buildOrgContext(org) {\n    if (!org) return \"\";\n    const parts = [];\n    if (org.name) parts.push(`Organisation: ${org.name}`);\n    if (org.org_type) {\n        const labels = {\n            registered_charity: \"Registered Charity\",\n            cic: \"Community Interest Company (CIC)\",\n            social_enterprise: \"Social Enterprise\",\n            community_group: \"Community Group\",\n            other: \"Other\"\n        };\n        parts.push(`Type: ${labels[org.org_type] ?? org.org_type}`);\n    }\n    if (org.primary_location) parts.push(`Location: ${org.primary_location}`);\n    if (org.annual_income_band) parts.push(`Annual income: ${org.annual_income_band}`);\n    if (org.mission) parts.push(`Mission: ${org.mission}`);\n    if (org.themes?.length) parts.push(`Themes: ${org.themes.join(\", \")}`);\n    if (org.areas_of_work?.length) parts.push(`Areas of work: ${org.areas_of_work.join(\", \")}`);\n    if (org.beneficiaries?.length) parts.push(`Beneficiaries: ${org.beneficiaries.join(\", \")}`);\n    if (org.min_grant_target || org.max_grant_target) {\n        const min = org.min_grant_target ? `£${org.min_grant_target.toLocaleString()}` : \"any\";\n        const max = org.max_grant_target ? `£${org.max_grant_target.toLocaleString()}` : \"any\";\n        parts.push(`Grant size target: ${min} – ${max}`);\n    }\n    if (org.funder_type_preferences?.length) {\n        parts.push(`Preferred funder types: ${org.funder_type_preferences.join(\", \")}`);\n    }\n    if (org.years_operating != null) parts.push(`Years operating: ${org.years_operating}`);\n    if (org.people_per_year != null) parts.push(`People served per year: ${org.people_per_year}`);\n    if (org.volunteers != null) parts.push(`Volunteers: ${org.volunteers}`);\n    if (org.projects_running != null) parts.push(`Active projects: ${org.projects_running}`);\n    if (org.key_outcomes?.length) parts.push(`Key outcomes: ${org.key_outcomes.slice(0, 3).join(\"; \")}`);\n    if (!parts.length) return \"\";\n    return `\\n\\nAPPLICANT PROFILE (use this to personalise scoring — prioritise grants that fit this organisation's location, size, mission and themes):\\n${parts.map((p)=>`- ${p}`).join(\"\\n\")}\\n`;\n}\nasync function POST(req) {\n    try {\n        const { query, grants, org } = await req.json();\n        const orgContext = buildOrgContext(org ?? null);\n        const prompt = `You are a UK charity funding expert helping a small charity find the most suitable grants.\n\nThe user is searching for: \"${query}\"\n${orgContext}\nAvailable grants:\n${JSON.stringify(grants)}\n\nScoring rules — apply these strictly:\n1. TOPIC match: Does the grant's sectors/description match the activity (e.g. training, youth work, mental health)?\n2. GEOGRAPHY match: If the query or the applicant profile mentions a specific place, check whether the grant explicitly serves that area or has isLocal:true. Large UK-wide funders with no local dimension should score MAX 35 when a specific location is given — they should not dominate results. Grants matching the applicant's primary_location should be boosted.\n3. SIZE fit: Match the grant's amount range to the applicant's income band and grant size target. Huge grants (£500k+) are unsuitable for very small organisations.\n4. ELIGIBILITY fit: Does the organisation type (charity, CIC, community group, etc.) and scale likely match the grant's requirements?\n5. THEME/MISSION fit: Where an applicant profile is provided, boost grants that align with their stated themes, areas of work and beneficiaries.\n\nReturn a JSON array of the top matching grants ranked by score. For each include:\n- grantId (the id field)\n- score (0-100)\n- reason (1 sentence explaining specifically why this grant fits — reference the applicant's location or mission if relevant)\n\nOnly include grants with score above 40. Max 20 results.\nReturn ONLY valid JSON array, no markdown, no other text.`;\n        const response = await fetch(\"https://api.anthropic.com/v1/messages\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"x-api-key\": process.env.ANTHROPIC_API_KEY ?? \"\",\n                \"anthropic-version\": \"2023-06-01\"\n            },\n            body: JSON.stringify({\n                model: \"claude-haiku-4-5-20251001\",\n                max_tokens: 3000,\n                messages: [\n                    {\n                        role: \"user\",\n                        content: prompt\n                    }\n                ]\n            })\n        });\n        const data = await response.json();\n        if (!response.ok) {\n            const message = data?.error?.message ?? `Anthropic API error (${response.status})`;\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: message\n            }, {\n                status: response.status\n            });\n        }\n        const text = data.content?.[0]?.text;\n        if (!text) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Empty response from AI\"\n            }, {\n                status: 502\n            });\n        }\n        // Strip markdown fences, then extract JSON array even if model adds prose\n        let cleaned = text.replace(/```json\\s*/g, \"\").replace(/```\\s*/g, \"\").trim();\n        if (!cleaned.startsWith(\"[\")) {\n            const jsonMatch = cleaned.match(/\\[[\\s\\S]*\\]/);\n            if (!jsonMatch) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"AI did not return valid results — please try again\"\n                }, {\n                    status: 502\n                });\n            }\n            cleaned = jsonMatch[0];\n        }\n        const results = JSON.parse(cleaned);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(results);\n    } catch (err) {\n        const message = err instanceof Error ? err.message : \"Search failed\";\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Li9zcmMvYXBwL2FwaS9haS1zZWFyY2gvcm91dGUudHM/ZjQ4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgdHlwZSB7IE9yZ2FuaXNhdGlvbiB9IGZyb20gJ0AvdHlwZXMnXG5cbmZ1bmN0aW9uIGJ1aWxkT3JnQ29udGV4dChvcmc6IE9yZ2FuaXNhdGlvbiB8IG51bGwpOiBzdHJpbmcge1xuICBpZiAoIW9yZykgcmV0dXJuICcnXG5cbiAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gW11cblxuICBpZiAob3JnLm5hbWUpIHBhcnRzLnB1c2goYE9yZ2FuaXNhdGlvbjogJHtvcmcubmFtZX1gKVxuICBpZiAob3JnLm9yZ190eXBlKSB7XG4gICAgY29uc3QgbGFiZWxzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgcmVnaXN0ZXJlZF9jaGFyaXR5OiAnUmVnaXN0ZXJlZCBDaGFyaXR5JyxcbiAgICAgIGNpYzogJ0NvbW11bml0eSBJbnRlcmVzdCBDb21wYW55IChDSUMpJyxcbiAgICAgIHNvY2lhbF9lbnRlcnByaXNlOiAnU29jaWFsIEVudGVycHJpc2UnLFxuICAgICAgY29tbXVuaXR5X2dyb3VwOiAnQ29tbXVuaXR5IEdyb3VwJyxcbiAgICAgIG90aGVyOiAnT3RoZXInLFxuICAgIH1cbiAgICBwYXJ0cy5wdXNoKGBUeXBlOiAke2xhYmVsc1tvcmcub3JnX3R5cGVdID8/IG9yZy5vcmdfdHlwZX1gKVxuICB9XG4gIGlmIChvcmcucHJpbWFyeV9sb2NhdGlvbikgcGFydHMucHVzaChgTG9jYXRpb246ICR7b3JnLnByaW1hcnlfbG9jYXRpb259YClcbiAgaWYgKG9yZy5hbm51YWxfaW5jb21lX2JhbmQpIHBhcnRzLnB1c2goYEFubnVhbCBpbmNvbWU6ICR7b3JnLmFubnVhbF9pbmNvbWVfYmFuZH1gKVxuICBpZiAob3JnLm1pc3Npb24pIHBhcnRzLnB1c2goYE1pc3Npb246ICR7b3JnLm1pc3Npb259YClcbiAgaWYgKG9yZy50aGVtZXM/Lmxlbmd0aCkgICAgICAgIHBhcnRzLnB1c2goYFRoZW1lczogJHtvcmcudGhlbWVzLmpvaW4oJywgJyl9YClcbiAgaWYgKG9yZy5hcmVhc19vZl93b3JrPy5sZW5ndGgpIHBhcnRzLnB1c2goYEFyZWFzIG9mIHdvcms6ICR7b3JnLmFyZWFzX29mX3dvcmsuam9pbignLCAnKX1gKVxuICBpZiAob3JnLmJlbmVmaWNpYXJpZXM/Lmxlbmd0aCkgcGFydHMucHVzaChgQmVuZWZpY2lhcmllczogJHtvcmcuYmVuZWZpY2lhcmllcy5qb2luKCcsICcpfWApXG4gIGlmIChvcmcubWluX2dyYW50X3RhcmdldCB8fCBvcmcubWF4X2dyYW50X3RhcmdldCkge1xuICAgIGNvbnN0IG1pbiA9IG9yZy5taW5fZ3JhbnRfdGFyZ2V0ID8gYMKjJHtvcmcubWluX2dyYW50X3RhcmdldC50b0xvY2FsZVN0cmluZygpfWAgOiAnYW55J1xuICAgIGNvbnN0IG1heCA9IG9yZy5tYXhfZ3JhbnRfdGFyZ2V0ID8gYMKjJHtvcmcubWF4X2dyYW50X3RhcmdldC50b0xvY2FsZVN0cmluZygpfWAgOiAnYW55J1xuICAgIHBhcnRzLnB1c2goYEdyYW50IHNpemUgdGFyZ2V0OiAke21pbn0g4oCTICR7bWF4fWApXG4gIH1cbiAgaWYgKG9yZy5mdW5kZXJfdHlwZV9wcmVmZXJlbmNlcz8ubGVuZ3RoKSB7XG4gICAgcGFydHMucHVzaChgUHJlZmVycmVkIGZ1bmRlciB0eXBlczogJHtvcmcuZnVuZGVyX3R5cGVfcHJlZmVyZW5jZXMuam9pbignLCAnKX1gKVxuICB9XG4gIGlmIChvcmcueWVhcnNfb3BlcmF0aW5nICE9IG51bGwpICBwYXJ0cy5wdXNoKGBZZWFycyBvcGVyYXRpbmc6ICR7b3JnLnllYXJzX29wZXJhdGluZ31gKVxuICBpZiAob3JnLnBlb3BsZV9wZXJfeWVhciAhPSBudWxsKSAgcGFydHMucHVzaChgUGVvcGxlIHNlcnZlZCBwZXIgeWVhcjogJHtvcmcucGVvcGxlX3Blcl95ZWFyfWApXG4gIGlmIChvcmcudm9sdW50ZWVycyAhPSBudWxsKSAgICAgICBwYXJ0cy5wdXNoKGBWb2x1bnRlZXJzOiAke29yZy52b2x1bnRlZXJzfWApXG4gIGlmIChvcmcucHJvamVjdHNfcnVubmluZyAhPSBudWxsKSBwYXJ0cy5wdXNoKGBBY3RpdmUgcHJvamVjdHM6ICR7b3JnLnByb2plY3RzX3J1bm5pbmd9YClcbiAgaWYgKG9yZy5rZXlfb3V0Y29tZXM/Lmxlbmd0aCkgICAgIHBhcnRzLnB1c2goYEtleSBvdXRjb21lczogJHtvcmcua2V5X291dGNvbWVzLnNsaWNlKDAsIDMpLmpvaW4oJzsgJyl9YClcblxuICBpZiAoIXBhcnRzLmxlbmd0aCkgcmV0dXJuICcnXG5cbiAgcmV0dXJuIGBcXG5cXG5BUFBMSUNBTlQgUFJPRklMRSAodXNlIHRoaXMgdG8gcGVyc29uYWxpc2Ugc2NvcmluZyDigJQgcHJpb3JpdGlzZSBncmFudHMgdGhhdCBmaXQgdGhpcyBvcmdhbmlzYXRpb24ncyBsb2NhdGlvbiwgc2l6ZSwgbWlzc2lvbiBhbmQgdGhlbWVzKTpcXG4ke3BhcnRzLm1hcChwID0+IGAtICR7cH1gKS5qb2luKCdcXG4nKX1cXG5gXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHF1ZXJ5LCBncmFudHMsIG9yZyB9ID0gYXdhaXQgcmVxLmpzb24oKVxuXG4gICAgY29uc3Qgb3JnQ29udGV4dCA9IGJ1aWxkT3JnQ29udGV4dChvcmcgPz8gbnVsbClcblxuICAgIGNvbnN0IHByb21wdCA9IGBZb3UgYXJlIGEgVUsgY2hhcml0eSBmdW5kaW5nIGV4cGVydCBoZWxwaW5nIGEgc21hbGwgY2hhcml0eSBmaW5kIHRoZSBtb3N0IHN1aXRhYmxlIGdyYW50cy5cblxuVGhlIHVzZXIgaXMgc2VhcmNoaW5nIGZvcjogXCIke3F1ZXJ5fVwiXG4ke29yZ0NvbnRleHR9XG5BdmFpbGFibGUgZ3JhbnRzOlxuJHtKU09OLnN0cmluZ2lmeShncmFudHMpfVxuXG5TY29yaW5nIHJ1bGVzIOKAlCBhcHBseSB0aGVzZSBzdHJpY3RseTpcbjEuIFRPUElDIG1hdGNoOiBEb2VzIHRoZSBncmFudCdzIHNlY3RvcnMvZGVzY3JpcHRpb24gbWF0Y2ggdGhlIGFjdGl2aXR5IChlLmcuIHRyYWluaW5nLCB5b3V0aCB3b3JrLCBtZW50YWwgaGVhbHRoKT9cbjIuIEdFT0dSQVBIWSBtYXRjaDogSWYgdGhlIHF1ZXJ5IG9yIHRoZSBhcHBsaWNhbnQgcHJvZmlsZSBtZW50aW9ucyBhIHNwZWNpZmljIHBsYWNlLCBjaGVjayB3aGV0aGVyIHRoZSBncmFudCBleHBsaWNpdGx5IHNlcnZlcyB0aGF0IGFyZWEgb3IgaGFzIGlzTG9jYWw6dHJ1ZS4gTGFyZ2UgVUstd2lkZSBmdW5kZXJzIHdpdGggbm8gbG9jYWwgZGltZW5zaW9uIHNob3VsZCBzY29yZSBNQVggMzUgd2hlbiBhIHNwZWNpZmljIGxvY2F0aW9uIGlzIGdpdmVuIOKAlCB0aGV5IHNob3VsZCBub3QgZG9taW5hdGUgcmVzdWx0cy4gR3JhbnRzIG1hdGNoaW5nIHRoZSBhcHBsaWNhbnQncyBwcmltYXJ5X2xvY2F0aW9uIHNob3VsZCBiZSBib29zdGVkLlxuMy4gU0laRSBmaXQ6IE1hdGNoIHRoZSBncmFudCdzIGFtb3VudCByYW5nZSB0byB0aGUgYXBwbGljYW50J3MgaW5jb21lIGJhbmQgYW5kIGdyYW50IHNpemUgdGFyZ2V0LiBIdWdlIGdyYW50cyAowqM1MDBrKykgYXJlIHVuc3VpdGFibGUgZm9yIHZlcnkgc21hbGwgb3JnYW5pc2F0aW9ucy5cbjQuIEVMSUdJQklMSVRZIGZpdDogRG9lcyB0aGUgb3JnYW5pc2F0aW9uIHR5cGUgKGNoYXJpdHksIENJQywgY29tbXVuaXR5IGdyb3VwLCBldGMuKSBhbmQgc2NhbGUgbGlrZWx5IG1hdGNoIHRoZSBncmFudCdzIHJlcXVpcmVtZW50cz9cbjUuIFRIRU1FL01JU1NJT04gZml0OiBXaGVyZSBhbiBhcHBsaWNhbnQgcHJvZmlsZSBpcyBwcm92aWRlZCwgYm9vc3QgZ3JhbnRzIHRoYXQgYWxpZ24gd2l0aCB0aGVpciBzdGF0ZWQgdGhlbWVzLCBhcmVhcyBvZiB3b3JrIGFuZCBiZW5lZmljaWFyaWVzLlxuXG5SZXR1cm4gYSBKU09OIGFycmF5IG9mIHRoZSB0b3AgbWF0Y2hpbmcgZ3JhbnRzIHJhbmtlZCBieSBzY29yZS4gRm9yIGVhY2ggaW5jbHVkZTpcbi0gZ3JhbnRJZCAodGhlIGlkIGZpZWxkKVxuLSBzY29yZSAoMC0xMDApXG4tIHJlYXNvbiAoMSBzZW50ZW5jZSBleHBsYWluaW5nIHNwZWNpZmljYWxseSB3aHkgdGhpcyBncmFudCBmaXRzIOKAlCByZWZlcmVuY2UgdGhlIGFwcGxpY2FudCdzIGxvY2F0aW9uIG9yIG1pc3Npb24gaWYgcmVsZXZhbnQpXG5cbk9ubHkgaW5jbHVkZSBncmFudHMgd2l0aCBzY29yZSBhYm92ZSA0MC4gTWF4IDIwIHJlc3VsdHMuXG5SZXR1cm4gT05MWSB2YWxpZCBKU09OIGFycmF5LCBubyBtYXJrZG93biwgbm8gb3RoZXIgdGV4dC5gXG5cbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS5hbnRocm9waWMuY29tL3YxL21lc3NhZ2VzJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICd4LWFwaS1rZXknOiBwcm9jZXNzLmVudi5BTlRIUk9QSUNfQVBJX0tFWSA/PyAnJyxcbiAgICAgICAgJ2FudGhyb3BpYy12ZXJzaW9uJzogJzIwMjMtMDYtMDEnLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbW9kZWw6ICdjbGF1ZGUtaGFpa3UtNC01LTIwMjUxMDAxJyxcbiAgICAgICAgbWF4X3Rva2VuczogMzAwMCxcbiAgICAgICAgbWVzc2FnZXM6IFt7IHJvbGU6ICd1c2VyJywgY29udGVudDogcHJvbXB0IH1dLFxuICAgICAgfSksXG4gICAgfSlcblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBkYXRhPy5lcnJvcj8ubWVzc2FnZSA/PyBgQW50aHJvcGljIEFQSSBlcnJvciAoJHtyZXNwb25zZS5zdGF0dXN9KWBcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBtZXNzYWdlIH0sIHsgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMgfSlcbiAgICB9XG5cbiAgICBjb25zdCB0ZXh0ID0gZGF0YS5jb250ZW50Py5bMF0/LnRleHRcbiAgICBpZiAoIXRleHQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnRW1wdHkgcmVzcG9uc2UgZnJvbSBBSScgfSwgeyBzdGF0dXM6IDUwMiB9KVxuICAgIH1cblxuICAgIC8vIFN0cmlwIG1hcmtkb3duIGZlbmNlcywgdGhlbiBleHRyYWN0IEpTT04gYXJyYXkgZXZlbiBpZiBtb2RlbCBhZGRzIHByb3NlXG4gICAgbGV0IGNsZWFuZWQgPSB0ZXh0LnJlcGxhY2UoL2BgYGpzb25cXHMqL2csICcnKS5yZXBsYWNlKC9gYGBcXHMqL2csICcnKS50cmltKClcbiAgICBpZiAoIWNsZWFuZWQuc3RhcnRzV2l0aCgnWycpKSB7XG4gICAgICBjb25zdCBqc29uTWF0Y2ggPSBjbGVhbmVkLm1hdGNoKC9cXFtbXFxzXFxTXSpcXF0vKVxuICAgICAgaWYgKCFqc29uTWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdBSSBkaWQgbm90IHJldHVybiB2YWxpZCByZXN1bHRzIOKAlCBwbGVhc2UgdHJ5IGFnYWluJyB9LCB7IHN0YXR1czogNTAyIH0pXG4gICAgICB9XG4gICAgICBjbGVhbmVkID0ganNvbk1hdGNoWzBdXG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdHMgPSBKU09OLnBhcnNlKGNsZWFuZWQpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3VsdHMpXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyci5tZXNzYWdlIDogJ1NlYXJjaCBmYWlsZWQnXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6IG1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiYnVpbGRPcmdDb250ZXh0Iiwib3JnIiwicGFydHMiLCJuYW1lIiwicHVzaCIsIm9yZ190eXBlIiwibGFiZWxzIiwicmVnaXN0ZXJlZF9jaGFyaXR5IiwiY2ljIiwic29jaWFsX2VudGVycHJpc2UiLCJjb21tdW5pdHlfZ3JvdXAiLCJvdGhlciIsInByaW1hcnlfbG9jYXRpb24iLCJhbm51YWxfaW5jb21lX2JhbmQiLCJtaXNzaW9uIiwidGhlbWVzIiwibGVuZ3RoIiwiam9pbiIsImFyZWFzX29mX3dvcmsiLCJiZW5lZmljaWFyaWVzIiwibWluX2dyYW50X3RhcmdldCIsIm1heF9ncmFudF90YXJnZXQiLCJtaW4iLCJ0b0xvY2FsZVN0cmluZyIsIm1heCIsImZ1bmRlcl90eXBlX3ByZWZlcmVuY2VzIiwieWVhcnNfb3BlcmF0aW5nIiwicGVvcGxlX3Blcl95ZWFyIiwidm9sdW50ZWVycyIsInByb2plY3RzX3J1bm5pbmciLCJrZXlfb3V0Y29tZXMiLCJzbGljZSIsIm1hcCIsInAiLCJQT1NUIiwicmVxIiwicXVlcnkiLCJncmFudHMiLCJqc29uIiwib3JnQ29udGV4dCIsInByb21wdCIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsInByb2Nlc3MiLCJlbnYiLCJBTlRIUk9QSUNfQVBJX0tFWSIsImJvZHkiLCJtb2RlbCIsIm1heF90b2tlbnMiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwiZGF0YSIsIm9rIiwibWVzc2FnZSIsImVycm9yIiwic3RhdHVzIiwidGV4dCIsImNsZWFuZWQiLCJyZXBsYWNlIiwidHJpbSIsInN0YXJ0c1dpdGgiLCJqc29uTWF0Y2giLCJtYXRjaCIsInJlc3VsdHMiLCJwYXJzZSIsImVyciIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/ai-search/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai-search%2Froute&page=%2Fapi%2Fai-search%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-search%2Froute.ts&appDir=%2FUsers%2Fpaulkilty%2FDocuments%2Fgrant-tracker%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fpaulkilty%2FDocuments%2Fgrant-tracker&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();